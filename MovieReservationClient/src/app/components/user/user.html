
<!-- adding bg image -->
 <img
  *ngIf="currentForm === 'user' || currentForm === 'admin'"
  class="bg-image"
  src="assets/images/user-bg.jpeg"
  alt="User Background"
/>


<!-- adding bootstrap -->
 <div class="container py-5">
  <div class="card mx-auto shadow p-4" style="max-width: 500px;">
    <h2 class="text-center mb-4">
      {{ currentForm === 'user' ? (isLogin ? 'User Login' : 'User Registration') : 'Admin Login' }}
    </h2>

    <!-- USER LOGIN -->
    <form *ngIf="currentForm === 'user' && isLogin" [formGroup]="loginForm" (ngSubmit)="onLogin()">
      <div class="mb-3">
        <label>Email</label>
        <input type="email" formControlName="email" class="form-control" placeholder="Enter your email"
          [ngClass]="{ 'is-invalid': email?.invalid && email?.touched }" />
        <div class="invalid-feedback" *ngIf="email?.touched && email?.invalid">
          <div *ngIf="email?.errors?.['required']">Email is required.</div>
          <div *ngIf="email?.errors?.['email']">Invalid email format.</div>
        </div>
      </div>

      <div class="mb-3">
        <label>Password</label>
        <div class="input-group">
          <input [type]="showLoginPassword ? 'text' : 'password'" formControlName="password"
            class="form-control" placeholder="Enter your password"
            [ngClass]="{ 'is-invalid': password?.invalid && password?.touched }" />
          <span class="input-group-text" style="cursor:pointer" (click)="togglePassword('login')">
            {{ showLoginPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </span>
        </div>
        <div class="invalid-feedback d-block" *ngIf="password?.touched && password?.invalid">
          <div *ngIf="password?.errors?.['required']">Password is required.</div>
          <div *ngIf="password?.errors?.['minlength']">Minimum 6 characters required.</div>
        </div>
      </div>

      <button class="btn btn-primary w-100" [disabled]="loginForm.invalid">Login</button>

      <p class="text-center mt-3">
        Don't have an account?
        <a (click)="toggleForm('register')" class="text-decoration-none" style="cursor: pointer;">Sign Up</a>
      </p>
    </form>

    <!-- USER REGISTRATION -->
    <form *ngIf="currentForm === 'user' && !isLogin" [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <div class="mb-3">
        <label>Name</label>
        <input type="text" class="form-control" formControlName="name" placeholder="Enter your name"
          [ngClass]="{ 'is-invalid': registerForm.get('name')?.invalid && registerForm.get('name')?.touched }" />
        <div class="invalid-feedback">Name is required.</div>
      </div>

      <div class="mb-3">
  <label>Email</label>
  <input type="email" formControlName="email"
    class="form-control"
    placeholder="Enter your email"
    [ngClass]="{ 'is-invalid': registerForm.get('email')?.invalid && registerForm.get('email')?.touched }" />
  <div class="invalid-feedback" *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
    <div *ngIf="registerForm.get('email')?.errors?.['required']">Email is required.</div>
    <div *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format.</div>
    <div *ngIf="registerForm.get('email')?.errors?.['emailDomain']">
      Email must be a Gmail, Yahoo or Hotmail address.
    </div>
  </div>
</div>


      <div class="mb-3">
        <label>Address</label>
        <input type="text" class="form-control" formControlName="address" placeholder="Enter your address"
          [ngClass]="{ 'is-invalid': registerForm.get('address')?.invalid && registerForm.get('address')?.touched }" />
        <div class="invalid-feedback">Address is required.</div>
      </div>

      <div class="mb-3">
  <label>Phone</label>
  <input type="text" class="form-control" formControlName="phone"
    placeholder="Enter your 10-digit phone"
    [ngClass]="{ 'is-invalid': registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched }" />
  <div class="invalid-feedback" *ngIf="registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid">
    <div *ngIf="registerForm.get('phone')?.errors?.['required']">Phone is required.</div>
    <div *ngIf="registerForm.get('phone')?.errors?.['pattern']">Phone must be exactly 10 digits.</div>
  </div>
</div>


      <div class="mb-3">
        <label>Password</label>
        <div class="input-group">
          <input [type]="showRegisterPassword ? 'text' : 'password'" class="form-control"
            formControlName="password" placeholder="Enter your password"
            [ngClass]="{ 'is-invalid': registerForm.get('password')?.invalid && registerForm.get('password')?.touched }" />
          <span class="input-group-text" style="cursor:pointer" (click)="togglePassword('register')">
            {{ showRegisterPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </span>
        </div>
        <div class="invalid-feedback d-block" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
          <div *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</div>
          <div *ngIf="registerForm.get('password')?.errors?.['minlength']">Minimum 6 characters required.</div>
          <div *ngIf="registerForm.get('password')?.errors?.['pattern']">Must contain uppercase, lowercase, and a number.</div>
        </div>
      </div>

      <button class="btn btn-success w-100" [disabled]="registerForm.invalid">Register</button>

      <p class="text-center mt-3">
        Already have an account?
        <a (click)="toggleForm('login')" class="text-decoration-none" style="cursor:pointer;">Login</a>
      </p>
    </form>

    <!-- ADMIN LOGIN -->
    <form *ngIf="currentForm === 'admin'" [formGroup]="adminLoginForm" (ngSubmit)="onAdminLogin()">
      <div class="mb-3">
        <label>Email</label>
        <input type="email" formControlName="email" class="form-control" placeholder="Enter admin email"
          [ngClass]="{ 'is-invalid': adminEmail?.invalid && adminEmail?.touched }" />
        <div class="invalid-feedback d-block" *ngIf="adminEmail?.touched && adminEmail?.invalid">
          <div *ngIf="adminEmail?.errors?.['required']">Email is required.</div>
          <div *ngIf="adminEmail?.errors?.['email']">Invalid email format.</div>
        </div>
      </div>

      <div class="mb-3">
        <label>Password</label>
        <div class="input-group">
          <input [type]="showAdminPassword ? 'text' : 'password'" formControlName="password"
            class="form-control" placeholder="Enter password"
            [ngClass]="{ 'is-invalid': adminPassword?.invalid && adminPassword?.touched }" />
          <span class="input-group-text" style="cursor:pointer" (click)="togglePassword('admin')">
            {{ showAdminPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </span>
        </div>
        <div class="invalid-feedback d-block" *ngIf="adminPassword?.touched && adminPassword?.invalid">
          <div *ngIf="adminPassword?.errors?.['required']">Password is required.</div>
          <div *ngIf="adminPassword?.errors?.['minlength']">Minimum 6 characters required.</div>
        </div>
      </div>

      <button class="btn btn-primary w-100" [disabled]="adminLoginForm.invalid">Login</button>
    </form>

    <!-- Switch Forms -->
    <div class="text-center mt-3">
      <p *ngIf="currentForm === 'user'">
        <a (click)="toggleForm('admin')" class="text-decoration-none" style="cursor:pointer;">Admin Login</a>
      </p>
      <p *ngIf="currentForm === 'admin'">
        <a (click)="toggleForm('login')" class="text-decoration-none" style="cursor:pointer;">User Login</a>
      </p>
    </div>
  </div>
</div>

